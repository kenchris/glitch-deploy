<html><head><link rel="import" href="../../polymer-element.html"><link rel="import" href="../utils/mixin.html"><link rel="import" href="../utils/array-splice.html"><script>(function(){'use strict';let a=Polymer.dedupingMixin(d=>{let e=Polymer.ElementMixin(d);class f extends e{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return['__updateSelection(multi, items.*)']}constructor(){super(),this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(g,h){let k=h.path;if('items'==k){let l=h.base||[],m=this.__lastItems,n=this.__lastMulti;if(g!==n&&this.clearSelection(),m){let o=Polymer.ArraySplice.calculateSplices(l,m);this.__applySplices(o)}this.__lastItems=l,this.__lastMulti=g}else if('items.splices'==h.path)this.__applySplices(h.value.indexSplices);else{let l=k.slice('items.'.length),m=parseInt(l,10);0>l.indexOf('.')&&l==m&&this.__deselectChangedIdx(m)}}__applySplices(g){let h=this.__selectedMap;for(let m,l=0;l<g.length;l++){m=g[l],h.forEach((n,o)=>{n<m.index||(n>=m.index+m.removed.length?h.set(o,n+m.addedCount-m.removed.length):h.set(o,-1))});for(let o,n=0;n<m.addedCount;n++)o=m.index+n,h.has(this.items[o])&&h.set(this.items[o],o)}this.__updateLinks();let k=0;h.forEach((l,m)=>{0>l?(this.multi?this.splice('selected',k,1):this.selected=this.selectedItem=null,h.delete(m)):k++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let g=0;this.__selectedMap.forEach(h=>{0<=h&&this.linkPaths('items.'+h,'selected.'+g++)})}else this.__selectedMap.forEach(g=>{this.linkPaths('selected','items.'+g),this.linkPaths('selectedItem','items.'+g)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(g){return this.__selectedMap.has(g)}isIndexSelected(g){return this.isSelected(this.items[g])}__deselectChangedIdx(g){let h=this.__selectedIndexForItemIndex(g);if(0<=h){let k=0;this.__selectedMap.forEach((l,m)=>{h==k++&&this.deselect(m)})}}__selectedIndexForItemIndex(g){let h=this.__dataLinkedPaths['items.'+g];if(h)return parseInt(h.slice('selected.'.length),10)}deselect(g){let h=this.__selectedMap.get(g);if(0<=h){this.__selectedMap.delete(g);let k;this.multi&&(k=this.__selectedIndexForItemIndex(h)),this.__updateLinks(),this.multi?this.splice('selected',k,1):this.selected=this.selectedItem=null}}deselectIndex(g){this.deselect(this.items[g])}select(g){this.selectIndex(this.items.indexOf(g))}selectIndex(g){let h=this.items[g];this.isSelected(h)?this.toggle&&this.deselectIndex(g):(!this.multi&&this.__selectedMap.clear(),this.__selectedMap.set(h,g),this.__updateLinks(),this.multi?this.push('selected',h):this.selected=this.selectedItem=h)}}return f});Polymer.ArraySelectorMixin=a;let b=a(Polymer.Element);class c extends b{static get is(){return'array-selector'}}customElements.define(c.is,c),Polymer.ArraySelector=c})();</script><link rel="prefetch" href="../../polymer-element.html"><link rel="prefetch" href="../mixins/element-mixin.html"><link rel="prefetch" href="../utils/boot.html"><link rel="prefetch" href="../utils/settings.html"><link rel="prefetch" href="../utils/resolve-url.html"><link rel="prefetch" href="../utils/mixin.html"><link rel="prefetch" href="../utils/case-map.html"><link rel="prefetch" href="../utils/style-gather.html"><link rel="prefetch" href="dom-module.html"><link rel="prefetch" href="../mixins/property-effects.html"><link rel="prefetch" href="../utils/path.html"><link rel="prefetch" href="../mixins/property-accessors.html"><link rel="prefetch" href="../utils/async.html"><link rel="prefetch" href="../mixins/template-stamp.html"><link rel="prefetch" href="../utils/array-splice.html"></head><body></body></html>