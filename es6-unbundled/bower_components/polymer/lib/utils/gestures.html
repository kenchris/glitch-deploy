<html><head><link rel="import" href="boot.html"><link rel="import" href="async.html"><link rel="import" href="debounce.html"><script>(function(){'use strict';function a(I){return-1<z.indexOf(I)}function b(){return m&&C&&Polymer.passiveTouchGestures?{passive:!0}:void 0}function c(I){let J=D?['click']:z;for(let L,K=0;K<J.length;K++)L=J[K],I?document.addEventListener(L,F,!0):document.removeEventListener(L,F,!0)}function f(I){let J=I.type;if(!a(J))return!1;if('mousemove'===J){let K=void 0===I.buttons?1:I.buttons;return I instanceof window.MouseEvent&&!B&&(K=A[I.which]||0),!!(1&K)}let K=void 0===I.button?0:I.button;return 0===K}function g(I){if('click'===I.type){if(0===I.detail)return!0;let J=H._findOriginalTarget(I);if(!J.nodeType||J.nodeType!==Node.ELEMENT_NODE)return!0;let K=J.getBoundingClientRect(),L=I.pageX,M=I.pageY;return!(L>=K.left&&L<=K.right&&M>=K.top&&M<=K.bottom)}return!1}function h(I){let J='auto',K=I.composedPath&&I.composedPath();if(K)for(let M,L=0;L<K.length;L++)if(M=K[L],M[q]){J=M[q];break}return J}function k(I,J,K){I.movefn=J,I.upfn=K,document.addEventListener('mousemove',J),document.addEventListener('mouseup',K)}function l(I){document.removeEventListener('mousemove',I.movefn),document.removeEventListener('mouseup',I.upfn),I.movefn=null,I.upfn=null}let m='string'===typeof document.head.style.touchAction,o='__polymerGestures',p='__polymerGesturesHandled',q='__polymerGesturesTouchAction',s=25,u=5,z=['mousedown','mousemove','mouseup','click'],A=[0,1,4,2],B=function(){try{return 1===new MouseEvent('test',{buttons:1}).buttons}catch(I){return!1}}(),C=!1;(function(){try{let I=Object.defineProperty({},'passive',{get(){C=!0}});window.addEventListener('test',null,I),window.removeEventListener('test',null,I)}catch(I){}})();let D=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),E=function(){};E.prototype.reset,E.prototype.mousedown,E.prototype.mousemove,E.prototype.mouseup,E.prototype.touchstart,E.prototype.touchmove,E.prototype.touchend,E.prototype.click;let F=function(I){let J=I.sourceCapabilities;if((!J||J.firesTouchEvents)&&(I[p]={skip:!0},'click'===I.type)){let K=I.composedPath&&I.composedPath();if(K)for(let L=0;L<K.length;L++)if(K[L]===G.mouse.target)return;I.preventDefault(),I.stopPropagation()}},G={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};document.addEventListener('touchend',function(I){G.mouse.mouseIgnoreJob||c(!0);G.mouse.target=I.composedPath()[0],G.mouse.mouseIgnoreJob=Polymer.Debouncer.debounce(G.mouse.mouseIgnoreJob,Polymer.Async.timeOut.after(2500),function(){c(),G.mouse.target=null,G.mouse.mouseIgnoreJob=null})},!!C&&{passive:!0});const H={gestures:{},recognizers:[],deepTargetFind:function(I,J){let K=document.elementFromPoint(I,J),L=K;for(;L&&L.shadowRoot&&!window.ShadyDOM;){let M=L;if(L=L.shadowRoot.elementFromPoint(I,J),M===L)break;L&&(K=L)}return K},_findOriginalTarget:function(I){if(I.composedPath){const J=I.composedPath()[0];return J}return I.target},_handleNative:function(I){let J,K=I.type,L=I.currentTarget,M=L[o];if(M){let N=M[K];if(N){if(!I[p]&&(I[p]={},'touch'===K.slice(0,5))){I=I;let O=I.changedTouches[0];if('touchstart'===K&&1===I.touches.length&&(G.touch.id=O.identifier),G.touch.id!==O.identifier)return;m||'touchstart'!==K&&'touchmove'!==K||H._handleTouchAction(I)}if(J=I[p],!J.skip){for(let P,O=0;O<H.recognizers.length;O++)P=H.recognizers[O],N[P.name]&&!J[P.name]&&P.flow&&-1<P.flow.start.indexOf(I.type)&&P.reset&&P.reset();for(let P,O=0;O<H.recognizers.length;O++)P=H.recognizers[O],N[P.name]&&!J[P.name]&&(J[P.name]=!0,P[K](I))}}}},_handleTouchAction:function(I){let J=I.changedTouches[0],K=I.type;if('touchstart'===K)G.touch.x=J.clientX,G.touch.y=J.clientY,G.touch.scrollDecided=!1;else if('touchmove'===K){if(G.touch.scrollDecided)return;G.touch.scrollDecided=!0;let L=h(I),M=!1,N=Math.abs(G.touch.x-J.clientX),O=Math.abs(G.touch.y-J.clientY);I.cancelable&&('none'===L?M=!0:'pan-x'===L?M=O>N:'pan-y'===L&&(M=N>O)),M?I.preventDefault():H.prevent('track')}},addListener:function(I,J,K){return!!this.gestures[J]&&(this._add(I,J,K),!0)},removeListener:function(I,J,K){return!!this.gestures[J]&&(this._remove(I,J,K),!0)},_add:function(I,J,K){let L=this.gestures[J],M=L.deps,N=L.name,O=I[o];O||(I[o]=O={});for(let Q,R,P=0;P<M.length;P++)if(Q=M[P],!(D&&a(Q)&&'click'!==Q)){if(R=O[Q],R||(O[Q]=R={_count:0}),0===R._count){let S=!a(Q)&&b();I.addEventListener(Q,this._handleNative,S)}R[N]=(R[N]||0)+1,R._count=(R._count||0)+1}I.addEventListener(J,K),L.touchAction&&this.setTouchAction(I,L.touchAction)},_remove:function(I,J,K){let L=this.gestures[J],M=L.deps,N=L.name,O=I[o];if(O)for(let Q,R,P=0;P<M.length;P++)if(Q=M[P],R=O[Q],R&&R[N]&&(R[N]=(R[N]||1)-1,R._count=(R._count||1)-1,0===R._count)){let S=!a(Q)&&b();I.removeEventListener(Q,this._handleNative,S)}I.removeEventListener(J,K)},register:function(I){this.recognizers.push(I);for(let J=0;J<I.emits.length;J++)this.gestures[I.emits[J]]=I},_findRecognizerByEvent:function(I){for(let K,J=0;J<this.recognizers.length;J++){K=this.recognizers[J];for(let M,L=0;L<K.emits.length;L++)if(M=K.emits[L],M===I)return K}return null},setTouchAction:function(I,J){m&&(I.style.touchAction=J),I[q]=J},_fire:function(I,J,K){let L=new Event(J,{bubbles:!0,cancelable:!0,composed:!0});if(L.detail=K,I.dispatchEvent(L),L.defaultPrevented){let M=K.preventer||K.sourceEvent;M&&M.preventDefault&&M.preventDefault()}},prevent:function(I){let J=this._findRecognizerByEvent(I);J.info&&(J.info.prevent=!0)},resetMouseCanceller:function(){G.mouse.mouseIgnoreJob&&G.mouse.mouseIgnoreJob.flush()}};H.register({name:'downup',deps:['mousedown','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['down','up'],info:{movefn:null,upfn:null},reset:function(){l(this.info)},mousedown:function(I){if(f(I)){let J=H._findOriginalTarget(I),K=this;k(this.info,function(O){f(O)||(K._fire('up',J,O),l(K.info))},function(O){f(O)&&K._fire('up',J,O),l(K.info)}),this._fire('down',J,I)}},touchstart:function(I){this._fire('down',H._findOriginalTarget(I),I.changedTouches[0],I)},touchend:function(I){this._fire('up',H._findOriginalTarget(I),I.changedTouches[0],I)},_fire:function(I,J,K,L){H._fire(J,I,{x:K.clientX,y:K.clientY,sourceEvent:K,preventer:L,prevent:function(M){return H.prevent(M)}})}}),H.register({name:'track',touchAction:'none',deps:['mousedown','touchstart','touchmove','touchend'],flow:{start:['mousedown','touchstart'],end:['mouseup','touchend']},emits:['track'],info:{x:0,y:0,state:'start',started:!1,moves:[],addMove:function(I){this.moves.length>2&&this.moves.shift(),this.moves.push(I)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state='start',this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,l(this.info)},hasMovedEnough:function(I,J){if(this.info.prevent)return!1;if(this.info.started)return!0;let K=Math.abs(this.info.x-I),L=Math.abs(this.info.y-J);return K>=u||L>=u},mousedown:function(I){if(f(I)){let J=H._findOriginalTarget(I),K=this,L=function(O){let P=O.clientX,Q=O.clientY;K.hasMovedEnough(P,Q)&&(K.info.state=K.info.started?'mouseup'===O.type?'end':'track':'start','start'===K.info.state&&H.prevent('tap'),K.info.addMove({x:P,y:Q}),!f(O)&&(K.info.state='end',l(K.info)),K._fire(J,O),K.info.started=!0)};k(this.info,L,function(O){K.info.started&&L(O),l(K.info)}),this.info.x=I.clientX,this.info.y=I.clientY}},touchstart:function(I){let J=I.changedTouches[0];this.info.x=J.clientX,this.info.y=J.clientY},touchmove:function(I){let J=H._findOriginalTarget(I),K=I.changedTouches[0],L=K.clientX,M=K.clientY;this.hasMovedEnough(L,M)&&('start'===this.info.state&&H.prevent('tap'),this.info.addMove({x:L,y:M}),this._fire(J,K),this.info.state='track',this.info.started=!0)},touchend:function(I){let J=H._findOriginalTarget(I),K=I.changedTouches[0];this.info.started&&(this.info.state='end',this.info.addMove({x:K.clientX,y:K.clientY}),this._fire(J,K,I))},_fire:function(I,J){let K=this.info.moves[this.info.moves.length-2],L=this.info.moves[this.info.moves.length-1],M=L.x-this.info.x,N=L.y-this.info.y,O,P=0;K&&(O=L.x-K.x,P=L.y-K.y),H._fire(I,'track',{state:this.info.state,x:J.clientX,y:J.clientY,dx:M,dy:N,ddx:O,ddy:P,sourceEvent:J,hover:function(){return H.deepTargetFind(J.clientX,J.clientY)}})}}),H.register({name:'tap',deps:['mousedown','click','touchstart','touchend'],flow:{start:['mousedown','touchstart'],end:['click','touchend']},emits:['tap'],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},save:function(I){this.info.x=I.clientX,this.info.y=I.clientY},mousedown:function(I){f(I)&&this.save(I)},click:function(I){f(I)&&this.forward(I)},touchstart:function(I){this.save(I.changedTouches[0],I)},touchend:function(I){this.forward(I.changedTouches[0],I)},forward:function(I,J){let K=Math.abs(I.clientX-this.info.x),L=Math.abs(I.clientY-this.info.y),M=H._findOriginalTarget(J||I);(isNaN(K)||isNaN(L)||K<=s&&L<=s||g(I))&&!this.info.prevent&&H._fire(M,'tap',{x:I.clientX,y:I.clientY,sourceEvent:I,preventer:J})}}),H.findOriginalTarget=H._findOriginalTarget,H.add=H.addListener,H.remove=H.removeListener,Polymer.Gestures=H})();</script><link rel="prefetch" href="boot.html"><link rel="prefetch" href="async.html"><link rel="prefetch" href="debounce.html"><link rel="prefetch" href="mixin.html"></head><body></body></html>